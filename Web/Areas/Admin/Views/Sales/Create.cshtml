@model Web.Areas.Admin.Models.Sales.CreateSalesInvoiceViewModel

@section Header{
    @*<link href="~/assets/plugins/custom/datatables/datatables.bundle.css" rel="stylesheet" type="text/css" />*@
    <link href="~/assets/js/Select2ToTree/select2totree.css" rel="stylesheet" type="text/css" />
}

@*@TempData["alertNotification"]*@

@section Breadcrumb{
    <div class="page-title d-flex flex-column me-5 ms-lg-15">
        <!--begin::Title-->
        <h1 class=" text-dark fw-bolder fs-2 mb-0">
            <span class="badge badge-danger display-1 p-2">Invoice</span> #@Model.InvoiceNo
        </h1>
        <ul class="breadcrumb breadcrumb-separatorless fw-bold fs-7 pt-1">
            <li class="breadcrumb-item text-muted">
                <a asp-action="Index" asp-controller="Home" class="text-muted text-hover-primary">
                    Home
                </a>
            </li>
            <li class="breadcrumb-item">
                <span class="bullet bg-gray-300 w-5px h-2px"></span>
            </li>
            <li class="breadcrumb-item text-muted">
                <a asp-action="Create" asp-controller="Sales" class="text-muted text-hover-primary">
                    Sales
                </a>
            </li>
        </ul>
    </div>
}
<form id="productForm" method="post" asp-action="create" asp-controller="Sales" enctype="multipart/form-data" class="form d-flex flex-column flex-lg-row">
    <!--begin::Aside column-->
    <div class="d-flex flex-column gap-7 gap-lg-10 w-100 w-lg-300px mb-7 me-lg-10">
        <!--begin::Thumbnail settings-->
        <div class="card card-flush py-4" style="background-color: blanchedalmond;">
            <div class="row g-5 mb-11">
                <div class="col-sm-12">
                    <div id="clock"></div>
                </div>
            </div>
            <!--begin::Card header-->
            <div class="card-header">
                <!--begin::Card title-->
                <div class="card-title">
                    <h3>Total Price</h3>
                </div>
                <!--end::Card title-->
            </div>
            <!--end::Card header-->
            <!--begin::Card body-->
            <div class="card-body text-center pt-0">
                <h1 id="total_price">Total Price</h1>
                <input asp-for="TotalPrice" class="form-control mb-2" hidden />
                <input asp-for="InvoiceNo" class="form-control mb-2" hidden />
                @*<input name="InvoiceItems[0].Name" class="form-control mb-2" hidden value="11" />*@
            </div>
            <!--end::Card body-->
        </div>
        <!--end::Thumbnail settings-->
        <!--begin::Category & tags-->
        <div class="card card-flush py-4">
            <!--begin::Card body-->
            <div class="card-body pt-0">
               @* @if (ViewBag.byteBarCode != null)
                {
                    <img src="@ViewBag.Base64String" />
                }*@
                <!--begin::Select2-->
                <label class="required form-label" asp-for="Tendered"></label>

                <input asp-for="Tendered" class="form-control mb-2" type="number" min="0" placeholder="Paid amount...." required />
                <!--end::Select2-->
                <!--begin::Description-->
                <div class="text-muted fs-7">
                    <span asp-validation-for="Tendered" class="text-danger"></span>
                </div>
                <!--end::Description-->
                <!--begin::Input group-->
                <div class="mb-10 fv-row">
                    <!--begin::Label-->
                    <label class="required form-label" asp-for="Change"></label>
                    <!--end::Label-->
                    <!--begin::Input-->
                    <input asp-for="Change" class="form-control mb-2" type="number" min="0" pattern="/^[-]?\d*\.?\d{0,9}$/" placeholder="Change...." value="0" readonly />
                    <!--end::Input-->
                    <!--begin::Description-->
                    <span asp-validation-for="Change" class="text-danger"></span>
                    <!--end::Description-->
                </div>
            </div>

        </div>
        <!--end::Category & tags-->
    </div>
    <!--end::Aside column-->
    <!--begin::Main column-->
    <div class="d-flex flex-column flex-row-fluid gap-7 gap-lg-10">
        <!--begin:::Tabs-->
        <ul class="nav nav-custom nav-tabs nav-line-tabs nav-line-tabs-2x border-0 fs-4 fw-bold mb-n2">
            <!--begin:::Tab item-->
            <li class="nav-item">
                <a class="nav-link text-active-primary pb-4 active" data-bs-toggle="tab" href="#kt_ecommerce_add_product_english">Engilsh</a>
            </li>
            <!--end:::Tab item-->
        </ul>
        <!--end:::Tabs-->
        <!--begin::Tab content-->
        <div class="tab-content">
            <!--begin::Tab pane-->
            <div class="tab-pane fade show active" id="kt_ecommerce_add_product_english" role="tab-panel">
                <div class="d-flex flex-column gap-7 gap-lg-10">
                    <!--begin::General options-->
                    <!--begin::Card-->
                    <div class="card card-flush">
                        <!--begin::Card header-->
                        <div class=" p-5">
                            <div class="card-title">
                                <!--begin::Search-->
                                <div class="d-flex align-items-center position-relative my-1">
                                    <!--begin::Svg Icon | path: icons/duotune/general/gen021.svg-->
                                    <span class="svg-icon svg-icon-1 position-absolute ms-6">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                            <rect opacity="0.5" x="17.0365" y="15.1223" width="8.15546" height="2" rx="1" transform="rotate(45 17.0365 15.1223)" fill="black" />
                                            <path d="M11 19C6.55556 19 3 15.4444 3 11C3 6.55556 6.55556 3 11 3C15.4444 3 19 6.55556 19 11C19 15.4444 15.4444 19 11 19ZM11 5C7.53333 5 5 7.53333 5 11C5 14.4667 7.53333 17 11 17C14.4667 17 17 14.4667 17 11C17 7.53333 14.4667 5 11 5Z" fill="black" />
                                        </svg>
                                    </span>
                                    <!--end::Svg Icon-->
                                    <input type="text" data-kt-filemanager-table-filter="search" id="scanned-barcode" class="form-control form-control-solid ps-15" placeholder="Search Products &amp; Items" />
                                </div>
                                <!--end::Search-->
                            </div>
                            <!--begin::Card toolbar-->
                            <div class="card-toolbar">
                                <!--begin::Group actions-->
                                <div class="d-flex justify-content-end align-items-center d-none" data-kt-filemanager-table-toolbar="selected">
                                    <div class="fw-bolder me-5">
                                        <span class="me-2" data-kt-filemanager-table-select="selected_count"></span>Selected
                                    </div>
                                    <button type="button" class="btn btn-danger" data-kt-filemanager-table-select="delete_selected">Delete Selected</button>
                                </div>
                                <!--end::Group actions-->
                            </div>
                            <!--end::Card toolbar-->
                        </div>
                        <!--end::Card header-->
                        <!--begin::Card body-->
                        <div class="card-body">
                            <!--begin::Table header-->
                            <div class="d-flex flex-stack">
                                <!--begin::Folder path-->
                                <div class="">
                                </div>
                                <!--end::Folder path-->
                                <!--begin::Folder Stats-->
                                <div class="badge badge-lg badge-info">
                                    <span id="kt_file_manager_items_counter">0</span>&nbsp;&nbsp;&nbsp;&nbsp; items
                                    <input asp-for="TotalQuantity" type="number" hidden />

                                </div>
                                <!--end::Folder Stats-->
                            </div>
                            <!--end::Table header-->
                            <!--begin::Table-->
                            <table class="table align-middle table-row-dashed fs-6 gy-5 dataTable no-footer dt-resposive nowrap AG-data-table"
                                   id="SalesInvoice"
                                   data-AG-columns='@Html.Raw(ViewBag.columns)'
                                   data-AG-message='@Html.Raw(ViewBag.Message)'
                                   data-AG-records='@Html.Raw(ViewBag.records_create)'
                                   data-AG-load-url='@Url.Action("Create_LoadDataTable","Cashier")'
                                   data-AG-edit='@Url.Action("Edit","Cashier")'
                                   data-AG-delete='@Url.Action("Delete","Cashier")'>
                                <thead>
                                    <tr class="text-start text-gray-400 fw-bolder fs-7 text-uppercase gs-0">
                                        <th>ID</th>
                                        @foreach (var item in ViewBag.stringColumns)
                                        {
                                            <th>@item</th>
                                        }
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody class="fw-bold">
                                    <tr>
                                        <td><input class="form-control form-control-sm text-start" type="number" value="22" name="Change" id="Change" hidden /></td>
                                    </tr>

                                </tbody>
                                <tfoot>
                                    <tr class="text-start text-gray-400 fw-bolder fs-7 text-uppercase gs-0">
                                        <th>ID</th>
                                        @foreach (var item in ViewBag.stringColumns)
                                        {
                                            <th>@item</th>
                                        }
                                        <th>Actions</th>
                                    </tr>
                                </tfoot>
                            </table>
                            <!--end::Table-->
                        </div>
                        <!--end::Card body-->
                    </div>
                    <!--end::Card-->
                    <!--end::General options-->
                </div>
            </div>
            <!--end::Tab pane-->
        </div>
        <form />
        <!--end::Tab content-->
        <div class="d-flex justify-content-end">
            <!--begin::Button-->
            <a asp-action="index" id="kt_ecommerce_add_product_cancel" class="btn btn-light me-5">Cancel</a>
            <!--end::Button-->
            <!--begin::Button-->
            <button type="submit" id="kt_ecommerce_add_product_submit" class="btn btn-primary">
                <span class="indicator-label">Save Bill</span>
                <span class="indicator-progress">
                    Please wait...
                    <span class="spinner-border spinner-border-sm align-middle ms-2"></span>
                </span>
            </button>
            <!--end::Button-->
        </div>
    </div>
    <!--end::Main column-->
</form>

<!--begin::Scrolltop-->
<div id="kt_scrolltop" class="scrolltop" data-kt-scrolltop="true">
    <!--begin::Svg Icon | path: icons/duotune/arrows/arr066.svg-->
    <span class="svg-icon">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
            <rect opacity="0.5" x="13" y="6" width="13" height="2" rx="1" transform="rotate(90 13 6)" fill="black" />
            <path d="M12.5657 8.56569L16.75 12.75C17.1642 13.1642 17.8358 13.1642 18.25 12.75C18.6642 12.3358 18.6642 11.6642 18.25 11.25L12.7071 5.70711C12.3166 5.31658 11.6834 5.31658 11.2929 5.70711L5.75 11.25C5.33579 11.6642 5.33579 12.3358 5.75 12.75C6.16421 13.1642 6.83579 13.1642 7.25 12.75L11.4343 8.56569C11.7467 8.25327 12.2533 8.25327 12.5657 8.56569Z" fill="black" />
        </svg>
    </span>
    <!--end::Svg Icon-->
</div>
<!--end::Scrolltop-->
@section Scripts {
    <script src="~/admin/js/salesadmin.js" asp-append-version="true"></script>
    <script>
        function myJavaScriptMethod(valueFromMVC,barcode) {
            
            _Swal.AlertWithImage(valueFromMVC,barcode)
        }
        if ('@ViewBag.callJavascriptFunc' != "") {
            myJavaScriptMethod('@ViewBag.callJavascriptFunc', '@ViewBag.Base64String');
        }
    </script>
    }

